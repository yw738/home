import{h as R,u as W,Q as E,G as X,c as h,K as s,A as u,H as b,U as Y,V as w,E as y,R as p,I as N,O as B,P as L,n as S}from"./index-Zsn_JZzv.js";import{az as $,at as T}from"./plugin-vueexport-helper-NeqlJWNH.js";function J(f,r="data.js"){const c="// ".concat(r,"\nexport default ").concat(JSON.stringify(f,null,2),";\n"),v=new Blob([c],{type:"application/javascript"}),g=URL.createObjectURL(v),d=document.createElement("a");d.href=g,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(g)}let _=(f={})=>JSON.parse(JSON.stringify(f));const U={class:"box"},V={style:{margin:"10px 0 0 0"}},D={style:{color:"red"}},z={__name:"index",setup(f){let r=R({border:!0,treeConfig:{showLine:!0,childrenField:"children"},editConfig:{trigger:"click",mode:"cell"},columns:[{type:"seq",width:70},{field:"title",title:"title",width:200,treeNode:!0,editRender:{name:"input"}},{field:"icon",title:"icon",width:150,editRender:{name:"input"}},{field:"tips",title:"tips",editRender:{name:"input"}},{field:"tags",title:"tags",width:200,editRender:{name:"input"}},{field:"url",title:"url",editRender:{name:"input"}},{field:"img",title:"img",editRender:{name:"input"}},{field:"private",title:"是否私有",editRender:{name:"select",options:[{label:"",value:""},{label:"隐藏",value:"true"},{label:"显示",value:"false"}]}},{field:"action",title:"操作",width:150,slots:{default:"action"}}],data:[]}),c=R(null),v=()=>{let e=c.value.getTreeExpandRecords();return console.log(e),e},g=(i=[])=>{const e=c.value;e&&e.setTreeExpand(i,!0)},d=i=>{let e=v();i(),S(()=>g(e))};W(()=>{let i=_(r.value);E.forEach(e=>{var n;(n=e.children)!=null&&n.length&&(e._X_ROW_KEY&&delete e._X_ROW_KEY,e.children.forEach(l=>{var a;l._X_ROW_KEY&&delete l._X_ROW_KEY,l.tags&&(l.tags=l.tags.join(",")),l!=null&&l.private&&(l.private=l.private.toString()),(a=l.children)!=null&&a.length&&l.children.forEach(t=>{t._X_ROW_KEY&&delete t._X_ROW_KEY,t!=null&&t.tags&&(t.tags=t.tags.join(",")),t!=null&&t.private&&(t.private=t.private.toString())})}))}),i.data=E,r.value=i});let O=()=>{let i=_(r.value);i.data.push({title:"新增的",children:[{title:"",tags:"",tips:"",url:""}]}),d(()=>{r.value=i})},x=i=>{var t,o;let{row:e,level:n}=i,l={title:"",tags:"",tips:"",url:"",children:[]},a={title:"",tags:"",tips:"",url:""};n==0?(t=e==null?void 0:e.children)!=null&&t.length?e.children.push(l):e.children=[l]:n==1&&((o=e==null?void 0:e.children)!=null&&o.length?e.children.push(a):e.children=[a]),d(()=>{r.value=_(r.value)})},k=async i=>{let{seq:e,row:n,rowid:l,level:a}=i;console.log(i);const t=_(r.value.data);let[o,m,K]=e.split(".");a==0?t.splice(o-1,1):a==1?t[o-1].children.splice(m-1,1):a==2&&t[o-1].children[m-1].children.splice(K-1,1),d(()=>{r.value.data=t})},C=()=>{const i=_(r.value.data);i.forEach(e=>{var n;(n=e.children)!=null&&n.length&&(e._X_ROW_KEY&&delete e._X_ROW_KEY,e.children.forEach(l=>{var a;l._X_ROW_KEY&&delete l._X_ROW_KEY,l.tags&&(l.tags=l.tags.split(",")),l!=null&&l.private&&(l.private=="false"?l.private=!1:l.private=!0),(a=l.children)!=null&&a.length&&l.children.forEach(t=>{t._X_ROW_KEY&&delete t._X_ROW_KEY,t!=null&&t.tags&&(t.tags=t.tags.split(",")),t!=null&&t.private&&(t.private=="false"?t.private=!1:t.private=!0)})}))}),console.log(i),J(i,"users.js")};return(i,e)=>{const n=T,l=w("vxe-grid");return y(),X("div",U,[h(n,{type:"primary",style:{"margin-right":"10px"},onClick:u(C)},{default:s(()=>e[0]||(e[0]=[p("保存")])),_:1},8,["onClick"]),h(n,{type:"primary",onClick:u(O)},{default:s(()=>e[1]||(e[1]=[p("新增大类别")])),_:1},8,["onClick"]),b("div",V,[h(l,Y(u(r),{ref_key:"gridRef",ref:c}),{"name-default":s(({row:a})=>[b("span",D,N(a.title),1)]),action:s(a=>[a.level<2?(y(),B(n,{key:0,onClick:t=>u(x)(a),style:{"margin-right":"10px"},type:"primary",size:"small"},{default:s(()=>e[2]||(e[2]=[p(" 加子类别 ")])),_:2},1032,["onClick"])):L("",!0),h(n,{danger:"",size:"small",onClick:t=>u(k)(a,i.index)},{default:s(()=>e[3]||(e[3]=[p("删除")])),_:2},1032,["onClick"])]),_:1},16)])])}}},q=$(z,[["__scopeId","data-v-e6b813e8"]]);export{q as default};
